---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';
import heroImage from '../assets/hero.jpg';
import { getCollection } from 'astro:content';

// Get latest posts
const posts = await getCollection('blog');
const latestPosts = posts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---

<Layout 
  title="YourBlog - Personal Blog"
  description="Welcome to my personal blog where I share my thoughts on technology, programming, and life."
>
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-b from-primary-600 to-primary-800 dark:from-primary-900 dark:to-primary-950">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
        <div>
          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6">
            Welcome to My Personal Blog
          </h1>
          <p class="text-xl text-primary-100 mb-8">
            Sharing insights about technology, programming, and life experiences.
          </p>
          <div class="flex flex-col sm:flex-row gap-4">
            <a 
              href="/blog" 
              class="inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-primary-700 bg-white hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
            >
              Read Blog
            </a>
            <a 
              href="/about" 
              class="inline-flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-700 bg-opacity-20 hover:bg-opacity-30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
            >
              About Me
            </a>
          </div>
        </div>
        <div class="hidden md:block">
          <Image 
            src={heroImage} 
            alt="Blog hero image" 
            class="rounded-lg shadow-xl"
            width={600}
            height={400}
          />
        </div>
      </div>
    </div>
    <div class="absolute bottom-0 left-0 right-0 h-16 bg-white dark:bg-gray-950 clip-path-wave"></div>
  </section>

  <!-- Latest Posts Section -->
  <section class="py-16 bg-white dark:bg-gray-950">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">Latest Articles</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
          Discover my most recent thoughts, tutorials, and insights.
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {latestPosts.map(post => (
          <article class="bg-white dark:bg-gray-900 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-800 transition-transform hover:translate-y-[-4px]">
            <a href={`/blog/${post.slug}`}>
              <Image 
                src={post.data.image.src} 
                alt={post.data.image.alt} 
                width={800}
                height={400}
                class="w-full h-48 object-cover"
              />
            </a>
            <div class="p-6">
              <div class="flex items-center text-sm mb-2">
                <span class="text-primary-600 dark:text-primary-400">{post.data.category}</span>
                <span class="mx-2 text-gray-400">â€¢</span>
                <time datetime={post.data.pubDate.toISOString()} class="text-gray-500 dark:text-gray-400">
                  {new Date(post.data.pubDate).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                  })}
                </time>
              </div>
              <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
                <a href={`/blog/${post.slug}`} class="hover:text-primary-600 dark:hover:text-primary-400">
                  {post.data.title}
                </a>
              </h3>
              <p class="text-gray-600 dark:text-gray-400 mb-4">
                {post.data.excerpt}
              </p>
              <a 
                href={`/blog/${post.slug}`} 
                class="text-primary-600 dark:text-primary-400 font-medium hover:text-primary-700 dark:hover:text-primary-300 inline-flex items-center"
              >
                Read more
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            </div>
          </article>
        ))}
      </div>
      
      <div class="text-center mt-12">
        <a 
          href="/blog" 
          class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
        >
          View All Posts
        </a>
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section class="py-16 bg-gray-50 dark:bg-gray-900">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">Subscribe to my newsletter</h2>
        <p class="text-xl text-gray-600 dark:text-gray-400 mb-8">
          Get notified when I publish new articles. No spam, just quality content.
        </p>
        <form class="flex flex-col sm:flex-row gap-2 max-w-lg mx-auto">
          <input 
            type="email" 
            placeholder="Enter your email" 
            class="flex-grow px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500"
            required
          />
          <button 
            type="submit" 
            class="px-6 py-3 bg-primary-600 text-white font-medium rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"
          >
            Subscribe
          </button>
        </form>
      </div>
    </div>
  </section>
</Layout>

<style>
  .clip-path-wave {
    clip-path: polygon(100% 0%, 0% 0%, 0% 65%, 1% 64.95%, 2% 64.8%, 3% 64.6%, 4% 64.3%, 5% 63.9%, 6% 63.45%, 7% 62.9%, 8% 62.25%, 9% 61.55%, 10% 60.8%, 11% 59.95%, 12% 59.05%, 13% 58.1%, 14% 57.1%, 15% 56.05%, 16% 55%, 17% 53.9%, 18% 52.8%, 19% 51.65%, 20% 50.5%, 21% 49.35%, 22% 48.2%, 23% 47.05%, 24% 45.9%, 25% 44.8%, 26% 43.75%, 27% 42.75%, 28% 41.75%, 29% 40.8%, 30% 39.9%, 31% 39.1%, 32% 38.35%, 33% 37.65%, 34% 37.05%, 35% 36.5%, 36% 36.05%, 37% 35.65%, 38% 35.35%, 39% 35.15%, 40% 35.05%, 41% 35%, 42% 35.05%, 43% 35.2%, 44% 35.45%, 45% 35.75%, 46% 36.15%, 47% 36.65%, 48% 37.2%, 49% 37.85%, 50% 38.55%, 51% 39.35%, 52% 40.2%, 53% 41.1%, 54% 42.05%, 55% 43.05%, 56% 44.1%, 57% 45.15%, 58% 46.3%, 59% 47.4%, 60% 48.55%, 61% 49.7%, 62% 50.85%, 63% 52%, 64% 53.15%, 65% 54.25%, 66% 55.35%, 67% 56.4%, 68% 57.45%, 69% 58.4%, 70% 59.35%, 71% 60.2%, 72% 61.05%, 73% 61.8%, 74% 62.45%, 75% 63.05%, 76% 63.6%, 77% 64.05%, 78% 64.4%, 79% 64.7%, 80% 64.85%, 81% 65%, 82% 65%, 83% 64.9%, 84% 64.75%, 85% 64.5%, 86% 64.2%, 87% 63.75%, 88% 63.25%, 89% 62.7%, 90% 62.05%, 91% 61.3%, 92% 60.5%, 93% 59.65%, 94% 58.75%, 95% 57.8%, 96% 56.8%, 97% 55.75%, 98% 54.65%, 99% 53.55%, 100% 52.4%);
  }
</style>